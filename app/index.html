<!doctype html>
<html lang="">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kakao Test</title>

  <!-- Your styles -->
  <link rel="stylesheet" href="styles/main.css">
</head>
<body class="mdl-demo mdl-color--grey-100 mdl-color-text--grey-700 mdl-base">
<a id="kakao-link-btn" href="javascript:sendLink()">
  <img src="http://dn.api1.kage.kakao.co.kr/14/dn/btqa9B90G1b/GESkkYjKCwJdYOkLvIBKZ0/o.jpg"/>
</a>

<a id="btn-kakao-invite" href="javascript:;">
  <img src="http://dn.api1.kage.kakao.co.kr/14/dn/btqa9B90G1b/GESkkYjKCwJdYOkLvIBKZ0/o.jpg"/>
</a>

</body>
</html>

<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
<script>
  Kakao.init('b23d8c7a3cb754b10482b358a703b0d3');

  var recommendCode = 'test';
  Kakao.Link.createTalkLinkButton({
    container: '#btn-kakao-invite',
    image: {
      src: 'http://dn.api1.kage.kakao.co.kr/14/dn/btqaWmFftyx/tBbQPH764Maw2R6IBhXd6K/o.jpg',
      width: '300',
      height: '200'
    },
    label: "좋은 숙박 예약하는 Tip 공유해요~ \n\n최저가를 보장하는 야놀자에서 예약하면 모두가 개이득. 오직 야놀자에서만 만날 수 있는 MY ROOM도 만나보세요. \n\n가입 시, 할인코드 [" + recommendCode + "] 입력하시면 5,000원 할인쿠폰을 바로 받을 수 있습니다.",
    appButton: {
      text: '할인 받기',
      webUrl : 'http://m.yanoljanow.com/join_form.php',
      marketParams : {
        android : {
          url : encodeURI('yanoljanow://app.yanolja.com/?recommend=' + recommendCode)
        },
        iphone : {
          recommend : recommendCode
        },
        ipad  : {
          recommend : recommendCode
        }
      },
      execParams : {
        android : {
          url : encodeURI('yanoljanow://app.yanolja.com/?recommend=' + recommendCode)
        },
        iphone : {
          recommend : recommendCode
        },
        ipad  : {
          recommend : recommendCode
        }
      }
    },
    fail: function(){
      alert('모바일 기기에서만 가능한 기능입니다.1');
      Kakao.Link.cleanup();
    }
  });

  function sendLink() {
    Kakao.Link.sendTalkLink({
      image: {
        src: 'http://dn.api1.kage.kakao.co.kr/14/dn/btqaWmFftyx/tBbQPH764Maw2R6IBhXd6K/o.jpg',
        width: '300',
        height: '200'
      },
      label: 'TEST',
      appButton: {
        text: '할인 받기',
        webUrl : 'http://m.yanoljanow.com',
        marketParams : {
          android : {
            url : encodeURI('yanoljanow://app.yanolja.com/?view=detail&recommend=124234')
          },
          iphone  :  {
            view : 'details',
            idx : '12345'
          },
          ipad  :  {
            view : 'details',
            idx : '12345'
          }
        },
        execParams : {
          android : {
            url : encodeURI('yanoljanow://app.yanolja.com/?view=detail&recommend=124234')
          },
          iphone  : {
            view : 'details',
            idx : '12345'
          },
          ipad  :  {
            view : 'details',
            idx : '12345'
          }
        }
      },
      fail: function(){
        alert('모바일 기기에서만 가능한 기능입니다.2');
        Kakao.Link.cleanup();
      }
    });




  }

</script>
